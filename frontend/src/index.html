<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <title>Charge Playground · Авторизация</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="./assets/styles/base.css" />
    <link rel="stylesheet" href="./assets/styles/auth.css" />
  </head>
  <body>
    <main>
      <header class="page-header">
        <h1 class="page-title">Charge Playground</h1>
        <p class="page-subtitle">
          Быстрая проверка API: зарегистрируйте пользователя, выполните вход и переходите к рабочей
          области для управления комнатами и каналами.
        </p>
      </header>

      <section class="section-card hero-card">
        <div>
          <h2>Что доступно внутри?</h2>
          <p>
            После авторизации откроется полноценная рабочая область с загрузкой комнаты по
            <code>slug</code>, созданием текстовых и голосовых каналов, просмотром истории сообщений и
            проверкой WebSocket-подключений.
          </p>
        </div>
        <div class="status-pill" id="redirect-banner" hidden>
          Вы уже авторизованы. <a href="./workspace.html">Перейти к рабочей области →</a>
        </div>
      </section>

      <div class="auth-panels">
        <section class="section-card api-settings" aria-labelledby="api-settings-heading">
          <div class="card-title-row">
            <div>
              <h2 id="api-settings-heading">Настройка подключения</h2>
              <p class="text-muted">
                Укажите базовый URL backend-сервиса. Значение сохраняется в браузере для следующих сессий.
              </p>
            </div>
            <div class="status-pill" id="api-status">API: не настроен</div>
          </div>
          <form id="api-form" class="inline" novalidate>
            <label class="field" style="flex: 1 1 260px;">
              Базовый URL API
              <input type="url" id="api-base" placeholder="http://localhost:8000" required />
            </label>
            <button type="submit" class="primary">Сохранить</button>
          </form>
          <p class="form-note">
            Для Docker-окружения оставьте <code>http://localhost:8000</code>. При удалённом доступе
            замените на внешний адрес сервиса.
          </p>
        </section>

        <section class="section-card" aria-labelledby="auth-heading">
          <div class="card-title-row">
            <div>
              <h2 id="auth-heading">Аккаунт</h2>
              <p class="text-muted">Создайте новую учётную запись или войдите под существующей.</p>
            </div>
            <div class="status-pill" id="auth-status">Не авторизовано</div>
          </div>
          <div class="grid-two">
            <form id="register-form" novalidate>
              <fieldset>
                <legend>Регистрация</legend>
                <label class="field">
                  Логин
                  <input name="login" autocomplete="username" required />
                </label>
                <label class="field">
                  Отображаемое имя
                  <input name="display_name" autocomplete="name" required />
                </label>
                <label class="field">
                  Пароль
                  <input type="password" name="password" autocomplete="new-password" required />
                </label>
                <div class="form-actions">
                  <button type="submit" class="primary">Создать аккаунт</button>
                  <p class="status-pill" id="register-status" hidden></p>
                </div>
              </fieldset>
            </form>

            <form id="login-form" novalidate>
              <fieldset>
                <legend>Вход</legend>
                <label class="field">
                  Логин
                  <input name="login" autocomplete="username" required />
                </label>
                <label class="field">
                  Пароль
                  <input type="password" name="password" autocomplete="current-password" required />
                </label>
                <div class="form-actions">
                  <button type="submit" class="primary">Войти</button>
                  <p class="status-pill" id="login-status" hidden></p>
                </div>
              </fieldset>
            </form>
          </div>
        </section>
      </div>
    </main>

    <script type="module" src="./assets/scripts/pages/auth.js"></script>
  </body>
</html>
