# –°—Ç–∞—Ç—É—Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ SFU

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ (–≠—Ç–∞–ø 1)

### 1.1 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ SFU —Å–µ—Ä–≤–µ—Ä–∞ ‚úÖ
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è `sfu-server/`
- ‚úÖ –°–æ–∑–¥–∞–Ω `package.json` —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω TypeScript (`tsconfig.json`)
- ‚úÖ –°–æ–∑–¥–∞–Ω `.gitignore`
- ‚úÖ –°–æ–∑–¥–∞–Ω `README.md`

### 1.2 –ë–∞–∑–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è Mediasoup —Å–µ—Ä–≤–µ—Ä–∞ ‚úÖ
- ‚úÖ `src/config.ts` - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- ‚úÖ `src/worker.ts` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Mediasoup workers
- ‚úÖ `src/rooms/Room.ts` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–Ω–∞—Ç–∞–º–∏
- ‚úÖ `src/rooms/Peer.ts` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∏—Ä–∞–º–∏
- ‚úÖ `src/rooms/RoomManager.ts` - –ú–µ–Ω–µ–¥–∂–µ—Ä –∫–æ–º–Ω–∞—Ç
- ‚úÖ `src/index.ts` - –û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–µ—Ä (Express + REST API)
- ‚úÖ `src/ws/handler.ts` - WebSocket –æ–±—Ä–∞–±–æ—Ç—á–∏–∫

### 1.3 Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä ‚úÖ
- ‚úÖ –°–æ–∑–¥–∞–Ω `Dockerfile`
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `docker-compose.yml` —Å —Å–µ—Ä–≤–∏—Å–æ–º `sfu`
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø–æ—Ä—Ç—ã –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

## üîÑ –í –ø—Ä–æ—Ü–µ—Å—Å–µ

### 1.3 Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (–∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ)
- ‚è≥ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–±–æ—Ä–∫–∏ Docker –æ–±—Ä–∞–∑–∞
- ‚è≥ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø—É—Å–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

## üìã –°–ª–µ–¥—É—é—â–∏–µ —ç—Ç–∞–ø—ã

### –≠—Ç–∞–ø 2: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±—ç–∫–µ–Ω–¥–æ–º
- [ ] –°–æ–∑–¥–∞—Ç—å `backend/app/services/sfu_manager.py`
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `backend/app/config.py` —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ SFU
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `VoiceSignalManager` –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ SFU
- [ ] –î–æ–±–∞–≤–∏—Ç—å API endpoints –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è SFU

### –≠—Ç–∞–ø 3: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞ ‚úÖ
- ‚úÖ –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ `VoiceClient.ts`
- ‚úÖ –°–æ–∑–¥–∞—Ç—å `SFUVoiceClient.ts`
- ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å `useVoiceConnection.ts`
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏

### –≠—Ç–∞–ø 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –ë–∞–∑–æ–≤–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (2, 5, 10 —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤)
- [ ] –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (20, 50, 100 —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤)
- [ ] –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –≠—Ç–∞–ø 5: –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- [ ] –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —Å feature flags
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## üìù –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏

- **–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç**: `docs/SFU_QUICK_START.md`
- **–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è**: `docs/SFU_SETUP_INSTRUCTIONS.md`
- **–ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**: `docs/SFU_IMPLEMENTATION_PLAN.md`

## üöÄ –ß—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ

1. **–í—ã–ø–æ–ª–Ω–∏—Ç—å —à–∞–≥–∏ –∏–∑ `SFU_QUICK_START.md`** (—É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ .env, —Å–±–æ—Ä–∫–∞ Docker)
2. **–°–æ–æ–±—â–∏—Ç—å –æ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏** –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è —Å –≠—Ç–∞–ø–æ–º 2
3. **–ò–ª–∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** - —è –º–æ–≥—É –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π –±—ç–∫–µ–Ω–¥–∞

## ‚ùì –ü–æ—á–µ–º—É –∫–Ω–æ–ø–∫–∞ ¬´–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è¬ª –Ω–µ –∫–æ–Ω–Ω–µ–∫—Ç–∏—Ç —Å—Ä–∞–∑—É –∫ SFU

- –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è –ª–æ–≥–∏–∫–∞ –≤—Å—ë –µ—â—ë –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä—è–º–æ–π `VoiceClient` (WebRTC p2p) –∏ —Å–∏–≥–Ω–∞–ª–∏–Ω–≥ `/ws/signal/{room}` ‚Äî –≤ `useVoiceConnection.ts` –Ω–µ—Ç –≤–µ—Ç–∫–∏, –∫–æ—Ç–æ—Ä–∞—è –±—ã —Å–æ–∑–¥–∞–≤–∞–ª–∞—Å—å —á–µ—Ä–µ–∑ `SFUVoiceClient` –∏–ª–∏ —á–∏—Ç–∞–ª–∞ –∞–¥—Ä–µ—Å SFU –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞. –ü–æ—ç—Ç–æ–º—É –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ ¬´–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è¬ª –º—ã –ø–æ–¥–∫–ª—é—á–∞–µ–º—Å—è —Ç–æ–ª—å–∫–æ –∫ —Å–∏–≥–Ω–∞–ª—å–Ω–æ–º—É —Å–µ—Ä–≤–µ—Ä—É –∫–æ–º–Ω–∞—Ç—ã –∏ –∂–¥—ë–º –ø–æ—è–≤–ª–µ–Ω–∏—è –¥—Ä—É–≥–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞, –∞ –Ω–µ –∫ SFU-—Å–µ—Ä–≤–µ—Ä—É –Ω–∞–ø—Ä—è–º—É—é.
- SFU-–∫–ª–∏–µ–Ω—Ç (`frontend/src/webrtc/SFUVoiceClient.ts`) —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω, –Ω–æ –Ω–∏–≥–¥–µ –Ω–µ –∏–Ω—Å—Ç–∞–Ω—Ü–∏—Ä—É–µ—Ç—Å—è –∏ –Ω–µ –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –≤–º–µ—Å—Ç–æ p2p-–∫–ª–∏–µ–Ω—Ç–∞. –ü–æ–∫–∞ –º—ã –Ω–µ –≤–Ω–µ–¥—Ä–∏–º –µ–≥–æ –≤ `useVoiceConnection` (–∏–ª–∏ –Ω–µ –¥–æ–±–∞–≤–∏–º —Ñ–∏—á–∞-—Ñ–ª–∞–≥ –≤—ã–±–æ—Ä–∞ –∫–ª–∏–µ–Ω—Ç–∞), –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –º–µ–¥–∏–∞-—Å–µ—Ä–≤–µ—Ä—É –Ω–µ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç, –∏ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∏ –Ω–µ —É—Å–ª—ã—à–∞—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞ —á–µ—Ä–µ–∑ SFU.
- –ß—Ç–æ–±—ã –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è —Å—Ä–∞–∑—É –∫ SFU, –Ω—É–∂–Ω–æ –∑–∞–≤–µ—Ä—à–∏—Ç—å —ç—Ç–∞–ø 3 –∏–∑ —ç—Ç–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞: –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π –∫–æ–¥ –Ω–∞ `SFUVoiceClient`, –ø—Ä–æ–∫–∏–Ω—É—Ç—å –∞–¥—Ä–µ—Å–∞ `sfuServerUrl`/`sfuWsUrl` –∏–∑ `/api/config/webrtc` –∏ —É–±—Ä–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç p2p —Å–∏–≥–Ω–∞–ª–∏–Ω–≥–∞.

